name: Auto Organize LeetCode Problems

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

jobs:
  organize:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Organize LeetCode folders
        run: |
          # leetcode í´ë” ìƒì„±
          mkdir -p leetcode
          
          # ìˆ«ìžë¡œ ì‹œìž‘í•˜ëŠ” ëª¨ë“  í´ë”ë¥¼ leetcode/ë¡œ ì´ë™
          for dir in [0-9]*; do
            if [[ -d "$dir" && ! "$dir" =~ ^leetcode$ ]]; then
              echo "Moving $dir â†’ leetcode/$dir"
              git mv "$dir" leetcode/ 2>/dev/null || true
            fi
          done
          
          # README.md ì—…ë°ì´íŠ¸ (ì„ íƒì‚¬í•­)
          if [[ ! -f leetcode/README.md ]]; then
            echo "# LeetCode Solutions\n\nAuto-organized solutions" > leetcode/README.md
          fi

      - name: Commit changes
        run: |
          git config user.name "LeetCode Bot"
          git config user.email "bot@leetcode.com"
          
          git add .
          
          if git diff --staged --quiet; then
            echo "âœ… No changes needed"
            exit 0
          fi
          
          git commit -m "ðŸ¤– auto: organize LeetCode problems into leetcode/ folder"
          git push

      - name: Notify success
        if: success()
        run: echo "ðŸŽ‰ LeetCode folders organized successfully!"
