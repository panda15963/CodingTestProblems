name: Auto Organize LeetCode Problems

on:
  push:
    branches: [main, master]

permissions:
  contents: write   # ðŸ”¥ push ê¶Œí•œ í•„ìˆ˜

jobs:
  organize:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Organize LeetCode folders
        run: |
          mkdir -p leetcode

          for dir in [0-9]*; do
            if [[ -d "$dir" && "$dir" != "leetcode" ]]; then
              echo "Moving $dir â†’ leetcode/$dir"
              git mv "$dir" leetcode/ 2>/dev/null || true
            fi
          done

          # README ì—†ìœ¼ë©´ ìƒì„±
          if [[ ! -f leetcode/README.md ]]; then
            echo -e "# LeetCode Solutions\n\nAuto-organized solutions" > leetcode/README.md
          fi

      - name: Commit changes
        run: |
          git config user.name "panda15963"
          git config user.email "seok7521@gmail.com"

          git add .

          if git diff --cached --quiet; then
            echo "âœ… No changes needed"
            exit 0
          fi

          git commit -m "ðŸ¤– auto: organize LeetCode problems into leetcode/ folder"
          git push

      - name: Notify success
        run: echo "ðŸŽ‰ LeetCode folders organized successfully!"